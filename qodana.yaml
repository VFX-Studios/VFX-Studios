#-------------------------------------------------------------------------------#
#               Qodana analysis is configured by qodana.yaml file               #
#             https://www.jetbrains.com/help/qodana/qodana-yaml.html            #
#-------------------------------------------------------------------------------#

#################################################################################
#              WARNING: Do not store sensitive information in this file,        #
#               as its contents will be included in the Qodana report.          #
#################################################################################
version: "1.0"

#Specify inspection profile for code analysis
profile:
  name: qodana.starter

name: Qodana Configuration Upload

on:
  push:
    branches: [ main, dev ]
  pull_request:
    branches: [ main ]
  workflow_dispatch:

    jobs:
      upload-qodana-config: --global-configs-file qodana-global-configurations.yaml
      runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run Qodana Configuration Uploader
    env:
      QODANA_CONFIGURATIONS_TOKEN: { QODANA_CONFIGURATIONS_TOKEN: "-e ${{ secrets=$QODANA_CONFIGURATIONS_TOKEN }}" }

    plugins:
      id: 'Qodana-js'
    failureConditions:
      severityThresholds:
      any: 15
      critical: 5
      testCoverageThresholds:
        fresh: 70
        total: 50

    #Specify Qodana linter for analysis (Applied in CI/CD pipeline)
    linter: jetbrains/qodana-jvm:2025.3
